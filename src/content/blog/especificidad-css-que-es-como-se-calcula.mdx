---
title: Especificidad en CSS, 驴qu茅 es y c贸mo se calcula?
description: La especificidad en CSS es una de las fases m谩s importantes a la hora de evaluar que estilos prevalecen frente a otros cuando existe herencia o competici贸n entre ellos. En este art铆culo vamos a ver qu茅 es y c贸mo se calcula la especificidad.
cover: ../../assets/blog/especificidad-css-que-es-como-se-calcula/especificidad-css.png
alt: Cartel del art铆culo Especificidad en CSS, 驴qu茅 es y c贸mo se calcula?
tags:
  - frontend
  - css
date: 2024-04-01
canonicalUrl: https://albertochamorro.dev/blog/especificidad-css-que-es-como-se-calcula
---

import { Image } from 'astro:assets'
import specificityCss from '../../assets/blog/especificidad-css-que-es-como-se-calcula/representacion-especificidad-css.png'
import browserSpecificity from '../../assets/blog/especificidad-css-que-es-como-se-calcula/especificidad-en-el-navegador.png'

驴Alguna vez has trabajado dando estilos a tus aplicaciones web pero no sab铆as por qu茅 un estilo anulaba otro aunque estuviera antes? 驴Te suena haber trabajado con una librer铆a de estilos o componentes externa y al intentar sobreescribir un estilo base no dabas con la clave o, en este caso, con el selector correcto?

Hagamos un ejercicio, imagina que tenemos el siguiente c贸digo, 驴de qu茅 color crees que ser铆a el fondo del bot贸n?

```html
<button class="button" onclick="alert('hello')">Click me</button>
<style>
  button[onclick] {
   background: grey;
  }

  .button {
   background: blue;
  }
</style>
```

Pues si has respondido gris 隆has acertado!

Ahora cambiemos el ejemplo, 驴seguir铆a siendo de color gris o habr铆a cambiado?

```html
<button class="button" onclick="alert('hello')">Click me</button>
<style>
  button[onclick] {
   background: grey;
  }

  .button.button {
   background: blue;
  }
</style>
```

Pues en este caso el bot贸n se pintar铆a de color azul.

Aunque no sea una bonita forma de aumentar la especificidad de un selector y nos haga sospechar de que algo est茅 mal ([smell](https://martinfowler.com/bliki/CodeSmell.html) ), el duplicar el nombre de la clase hace que el selector pase de 10 a 20 puntos de especificidad, frente a los 11 puntos de la primera regla.

En este art铆culo vamos a ver c贸mo se calcula la especificidad para no volver a fallar en este tipo de ejercicios.

## 驴Qu茅 es la especificidad en CSS?

La especificidad en CSS es un algoritmo que calcula y otorga puntuaciones a los selectores de nuestras hojas de estilo.

Cuando dos o m谩s selectores intentan estilar el mismo elemento se dice que estos entran en competici贸n, el navegador calcular谩 la especificidad de cada uno de los selectores y el que mayor puntuaci贸n consiga gana .

La especificidad es acumulativa, esto significa que todos los elementos indicados en un selector suman. Por ejemplo, `a.link` suma menos puntos que `a.link.primary-link:hover`.

Como sabemos, CSS significa Cascading Style Sheets o Hoja de Estilo en Cascada. Aunque en este algoritmo en cascada la posici贸n y el orden de aparici贸n de los selectores es importante, no deja de ser la primera fase. Las otras fases de este algoritmo son especificidad, origen (d贸nde entra en juego la herencia) y la importancia.

## C贸mo se calcula

C贸mo he comentado antes, el navegador realiza una puntuaci贸n dependiendo del selector que encuentra. Cuando un elemento tiene varios selectores, se aplican los estilos del que m谩s puntuaci贸n obtiene.

Veamos la puntuaci贸n para cada tipo de selector.

- **Selector universal** (`*`) y **combinadores** (`+` `>` `~` `||`): no tienen especificidad y obtienen **0 puntos**.
- **Selector de elementos o pseudoelementos** (`::`): los selectores a elementos, por ejemplo `a` o `button`, o pseudoelementos c贸mo `::after` o `::placeholder` obtienen **1 punto**.
- **Selector de clase** (`.`),**pseudoclase** (`:`) o **atributo** (`[]`): obtienen **10 puntos**. Algunas pseudoclases tienen reglas diferentes, las vemos m谩s adelante.
- **Selector de id** (`#`): obtiene una puntuaci贸n de **100 puntos**.
- **Estilo en l铆nea** (`style=`): tiene una puntuaci贸n de **1000 puntos**.
- **Regla**`!important`: otorga la mayor puntuaci贸n posible que son **10.000 puntos**.

Veamos algunos ejemplos y cuanta puntuaci贸n sumar铆an:

```css
button {
} /* 1 punto */

button.primary-button {
} /* 1+10 puntos */

button.primary-button[onclick] {
} /* 1+10+10 puntos */

button#button.primary-button {
} /* 1+100+10 puntos */

.primary-button {
  color: red !important; /* 10000 puntos */
  background: white; /* 10 puntos */
}
```

## Representaci贸n de la especificidad

En documentaci贸n, diagramas y calculadoras podr谩s ver la especificidad representada de la siguiente manera:

<Image
  src={specificityCss}
  alt="Ejemplo de representaci贸n de la especificidad en CSS con 3 n煤meros separados por guiones: el primero representa la puntuaci贸n por ID, el segundo por clase o atributo y el tercero por elemento"
/>

Incluso esta representaci贸n la puedes ver en el navegador, esta vez separada por comas:

<Image
  src={browserSpecificity}
  alt="Captura de las herramientas de desarrollador de Chrome donde se muestra la especificidad de un selector al colocar el cursor sobre 茅l en el panel de estilos"
/>

Veamos los ejemplos del punto anterior esta vez representando su especificidad:

```css
button {
} /* 0-0-1 = 1 punto */

button.primary-button {
} /* 0-1-1 = 11 puntos */

button.primary-button[onclick] {
} /* 0-2-1 = 21 puntos */

button#button.primary-button {
} /* 1-1-1 = 111 puntos */
```

驴Y si repasamos los ejemplos que te propuse en la introducci贸n de este art铆culo? Seguro que ahora sabes perfectamente cual selector es m谩s espec铆fico, ver谩s:

```html
<button class="button" onclick="alert('hello')">Click me</button>

<!-- EJERCICIO 1 -->
<style>
  button[onclick] { /* 0-1-1 = 11 puntos. */
   background: grey;
  }

  .button { /* 0-1-0 = 10 puntos */
   background: blue;
  }
</style>

<!-- EJERCICIO 2 -->
<style>
  button[onclick] { /* NO CAMBIA -> 0-1-1 = 11 puntos */
   background: grey;
  }

  .button.button { /* DUPLICA -> 0-2-0 = 20 puntos */
   background: blue;
  }
</style>
```

Si quieres ver una calculadora online para hacer tus propias pruebas echa un vistazo a [polypane.app](https://polypane.app/css-specificity-calculator).

## Algunas reglas adicionales

Aunque hemos explicado la forma b谩sica en la que el navegador calcula la especificidad de nuestras reglas de CSS, existen reglas y maneras de alterar este comportamiento.

- `@scope` y `@layer` pueden modificar el orden en el que se procesa, calcula y aplica la especificidad.
- `:nth-child()`, `:nth-last-child()`, `:nth-of-type()` y `:nth-last-of-type()` reciben como argumento la posici贸n de un elemento dentro de un grupo. Su especificidad es la suma de la pseudoclase m谩s el selector m谩s espec铆fico.
- `:is()` , `:not()` y `:has()` reciben como argumento una lista de selectores. En este caso la pseudoclase no a帽ade especificidad en s铆 misma pero s铆 aplica la especificidad de los selectores que recibe.
- `:where()` tambi茅n recibe como argumento una lista de selectores pero en este caso ni la pseudoclase ni sus selectores aplican especificidad, por lo que sumar铆a 0 puntos.

## Cierre

Como hemos visto, el c谩lculo de que regla CSS se aplica frente a otras no es tan simple c贸mo analizar en que orden aparecen.

Entran en juego m谩s aspectos; quiz谩 uno de los m谩s importantes y desconocidos es la especificidad. Aunque ya no es tan desconocida para ti, 驴verdad? 

---

Muchas gracias por llegar hasta el final y, si quieres modificar algo de este art铆culo, puedes hacerlo envi谩ndome una PR editando [este fichero](https://github.com/achamorro-dev/albertochamorro.dev/blob/main/src/content/blog/especificidad-css-que-es-como-se-calcula.mdx).

隆Gracias por leer hasta aqu铆 y hasta la pr贸xima !
